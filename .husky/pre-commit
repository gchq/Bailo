#!/bin/sh

# Run lint-staged for TypeScript frontend + backend
echo "üîç Running TypeScript/JavaScript lint-staged checks..."
npx lint-staged || exit 1

# Check if Python is installed
if command -v python3 >/dev/null 2>&1; then
  echo "Python detected: $(python3 --version)"

  # Check if 'pre-commit' is installed in this Python environment
  if python3 -m pre_commit --version >/dev/null 2>&1; then
    echo "‚öôÔ∏è Running Python pre-commit hooks..."
    pre-commit run --files $(git diff --cached --name-only)
  else
    echo "pre-commit not installed in Python environment. Skipping Python linting."
    echo "To enable, run: pip install pre-commit"
  fi
else
  echo "Python not found. Skipping Python linting."
fi
